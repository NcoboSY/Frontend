{"ast":null,"code":"import axios from \"axios\";\nconst {\n  CancelToken\n} = axios;\nconst search = input => {\n  if (input) {\n    try {\n      const source = CancelToken.source();\n      const request = axios.get(`/api/search?keyword=${input}`, {\n        cancelToken: source.token\n      });\n      return {\n        async process(callback) {\n          request.then(response => {\n            const json = response.data;\n            console.log(json);\n            if (json && json.data) {\n              callback(json.data.map(({\n                address\n              }) => {\n                return {\n                  city: address.cityName,\n                  code: address.cityCode,\n                  country: address.countryName,\n                  state: address.stateCode\n                };\n              }));\n            }\n          });\n        },\n        cancel() {\n          source.cancel();\n        }\n      };\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  return {\n    process() {\n      return [];\n    },\n    cancel() {}\n  };\n};\nconst json = '';\nconst hotelIds = [];\nconst getHotels = async cityCode => {\n  try {\n    const response = await axios.get(`/api/hotels?cityCode=${cityCode}`);\n    const json = response.data;\n    console.log(json);\n    if (json && json.data) {\n      for (let i = 0; i < json.data.length; i++) {\n        hotelIds.push(json.data[i].hotelId);\n      }\n      //return json.data.map(({ hotel }) => hotel);   \n    }\n  } catch (error) {\n    console.error(error);\n  }\n  //return [];\n};\n\nconst getHotelOffers = async hotelIds => {\n  try {\n    const response = await axios.get(`/api/hoteloffers?hotelIds=${hotelIds}`);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data.offers;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\nconst getOffers = async hotelId => {\n  try {\n    const response = await axios.get(`/api/offers?hotelIds=${hotelId}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}`);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data.offers;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\nconst confirmOffer = async offerId => {\n  try {\n    const response = await axios.get(`/api/offer?offerId=${offerId}`);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\nconst makeBooking = async offerId => {\n  const testData = {\n    guests: [{\n      name: {\n        title: \"MR\",\n        firstName: \"BOB\",\n        lastName: \"SMITH\"\n      },\n      contact: {\n        phone: \"+33679278416\",\n        email: \"bob.smith@email.com\"\n      }\n    }],\n    payments: [{\n      method: \"creditCard\",\n      card: {\n        vendorCode: \"VI\",\n        cardNumber: \"4111111111111111\",\n        expiryDate: \"2023-01\"\n      }\n    }]\n  };\n  try {\n    const response = await axios.post(`/api/booking?offerId=${offerId}`, testData);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\nexport { search, getHotels, getOffers, confirmOffer, makeBooking };","map":{"version":3,"names":["axios","CancelToken","search","input","source","request","get","cancelToken","token","process","callback","then","response","json","data","console","log","map","address","city","cityName","code","cityCode","country","countryName","state","stateCode","cancel","error","hotelIds","getHotels","i","length","push","hotelId","getHotelOffers","offers","getOffers","checkInDate","checkOutDate","confirmOffer","offerId","makeBooking","testData","guests","name","title","firstName","lastName","contact","phone","email","payments","method","card","vendorCode","cardNumber","expiryDate","post"],"sources":["C:/Siyanda Ncobo/API Stuff/Building-a-Hotel-Booking-App-in-NodeJS-and-React-Part-2-master/src/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst { CancelToken } = axios;\nconst search = (input) => {\n  if (input) {\n    try {\n      const source = CancelToken.source();\n      const request = axios.get(`/api/search?keyword=${input}`, {\n        cancelToken: source.token,\n      });\n      return {\n        async process(callback) {\n          request.then((response) => {\n            const json = response.data;\n            console.log(json);\n\n            if (json && json.data) {\n              callback(\n                json.data.map(({ address }) => {\n                  return {\n                    city: address.cityName,\n                    code: address.cityCode,\n                    country: address.countryName,\n                    state: address.stateCode,\n                  };\n                })\n              );\n            }\n          });\n        },\n        cancel() {\n          source.cancel();\n        },\n      };\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  return {\n    process() {\n      return [];\n    },\n    cancel() {},\n  };\n};\nconst json = '';\nconst hotelIds = [];\nconst getHotels = async (cityCode) => {\n  try {\n    const response = await axios.get(\n      `/api/hotels?cityCode=${cityCode}`\n    );\n    const json = response.data;\n    console.log(json);\n    if (json && json.data) {\n\n      for (let i = 0; i < json.data.length; i++){\n        hotelIds.push(json.data[i].hotelId);\n      }  \n      //return json.data.map(({ hotel }) => hotel);   \n\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  //return [];\n};\n\n\nconst getHotelOffers = async (hotelIds) => {\n  try {\n    const response = await axios.get(`/api/hoteloffers?hotelIds=${hotelIds}`);\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data.offers;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\n\nconst getOffers = async (hotelId) => {\n  try {\n    const response = await axios.get(`/api/offers?hotelIds=${hotelId}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}`);\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data.offers;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\n\n\nconst confirmOffer = async (offerId) => {\n  try {\n    const response = await axios.get(`/api/offer?offerId=${offerId}`);\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\nconst makeBooking = async (offerId) => {\n  const testData = {\n    guests: [\n      {\n        name: {\n          title: \"MR\",\n          firstName: \"BOB\",\n          lastName: \"SMITH\",\n        },\n        contact: {\n          phone: \"+33679278416\",\n          email: \"bob.smith@email.com\",\n        },\n      },\n    ],\n    payments: [\n      {\n        method: \"creditCard\",\n        card: {\n          vendorCode: \"VI\",\n          cardNumber: \"4111111111111111\",\n          expiryDate: \"2023-01\",\n        },\n      },\n    ],\n  };\n\n  try {\n    const response = await axios.post(\n      `/api/booking?offerId=${offerId}`,\n      testData\n    );\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\n\nexport { search, getHotels, getOffers, confirmOffer, makeBooking };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}