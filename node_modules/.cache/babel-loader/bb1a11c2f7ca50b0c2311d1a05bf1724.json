{"ast":null,"code":"import axios from \"axios\";\nconst {\n  CancelToken\n} = axios;\nconst search = input => {\n  if (input) {\n    try {\n      const source = CancelToken.source();\n      const request = axios.get(`/api/search?keyword=${input}`, {\n        cancelToken: source.token\n      });\n      return {\n        async process(callback) {\n          request.then(response => {\n            const json = response.data;\n            if (json && json.data) {\n              callback(json.data.map(({\n                address\n              }) => {\n                return {\n                  city: address.cityName,\n                  code: address.cityCode,\n                  country: address.countryName,\n                  state: address.stateCode\n                };\n              }));\n            }\n          });\n        },\n        cancel() {\n          source.cancel();\n        }\n      };\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  return {\n    process() {\n      return [];\n    },\n    cancel() {}\n  };\n};\nconst getHotels = async (cityCode, checkInDate, checkOutDate) => {\n  try {\n    const response = await axios.get(`/api/hotels?cityCode=${cityCode}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}`);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data.map(({\n        hotel\n      }) => hotel);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\nconst getOffers = async hotelId => {\n  try {\n    const response = await axios.get(`/api/offers?hotelId=${hotelId}`);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data.offers;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\nconst confirmOffer = async offerId => {\n  try {\n    const response = await axios.get(`/api/offer?offerId=${offerId}`);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\nconst makeBooking = async offerId => {\n  const testData = {\n    guests: [{\n      name: {\n        title: \"MR\",\n        firstName: \"BOB\",\n        lastName: \"SMITH\"\n      },\n      contact: {\n        phone: \"+33679278416\",\n        email: \"bob.smith@email.com\"\n      }\n    }],\n    payments: [{\n      method: \"creditCard\",\n      card: {\n        vendorCode: \"VI\",\n        cardNumber: \"4111111111111111\",\n        expiryDate: \"2023-01\"\n      }\n    }]\n  };\n  try {\n    const response = await axios.post(`/api/booking?offerId=${offerId}`, testData);\n    const json = response.data;\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\nexport { search, getHotels, getOffers, confirmOffer, makeBooking };","map":{"version":3,"names":["axios","CancelToken","search","input","source","request","get","cancelToken","token","process","callback","then","response","json","data","map","address","city","cityName","code","cityCode","country","countryName","state","stateCode","cancel","error","console","getHotels","checkInDate","checkOutDate","hotel","getOffers","hotelId","offers","confirmOffer","offerId","makeBooking","testData","guests","name","title","firstName","lastName","contact","phone","email","payments","method","card","vendorCode","cardNumber","expiryDate","post"],"sources":["C:/Siyanda Ncobo/API Stuff/Building-a-Hotel-Booking-App-in-NodeJS-and-React-Part-2-master/src/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst { CancelToken } = axios;\nconst search = (input) => {\n  if (input) {\n    try {\n      const source = CancelToken.source();\n      const request = axios.get(`/api/search?keyword=${input}`, {\n        cancelToken: source.token,\n      });\n      return {\n        async process(callback) {\n          request.then((response) => {\n            const json = response.data;\n\n            if (json && json.data) {\n              callback(\n                json.data.map(({ address }) => {\n                  return {\n                    city: address.cityName,\n                    code: address.cityCode,\n                    country: address.countryName,\n                    state: address.stateCode,\n                  };\n                })\n              );\n            }\n          });\n        },\n        cancel() {\n          source.cancel();\n        },\n      };\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  return {\n    process() {\n      return [];\n    },\n    cancel() {},\n  };\n};\nconst getHotels = async (cityCode, checkInDate, checkOutDate) => {\n  try {\n    const response = await axios.get(\n      `/api/hotels?cityCode=${cityCode}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}`\n    );\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data.map(({ hotel }) => hotel);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\nconst getOffers = async (hotelId) => {\n  try {\n    const response = await axios.get(`/api/offers?hotelId=${hotelId}`);\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data.offers;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return [];\n};\nconst confirmOffer = async (offerId) => {\n  try {\n    const response = await axios.get(`/api/offer?offerId=${offerId}`);\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\nconst makeBooking = async (offerId) => {\n  const testData = {\n    guests: [\n      {\n        name: {\n          title: \"MR\",\n          firstName: \"BOB\",\n          lastName: \"SMITH\",\n        },\n        contact: {\n          phone: \"+33679278416\",\n          email: \"bob.smith@email.com\",\n        },\n      },\n    ],\n    payments: [\n      {\n        method: \"creditCard\",\n        card: {\n          vendorCode: \"VI\",\n          cardNumber: \"4111111111111111\",\n          expiryDate: \"2023-01\",\n        },\n      },\n    ],\n  };\n\n  try {\n    const response = await axios.post(\n      `/api/booking?offerId=${offerId}`,\n      testData\n    );\n    const json = response.data;\n\n    if (json && json.data) {\n      return json.data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return null;\n};\n\nexport { search, getHotels, getOffers, confirmOffer, makeBooking };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}